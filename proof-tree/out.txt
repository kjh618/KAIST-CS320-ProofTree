                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        facY ∈ [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0]                       facY ∈ [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0]                       [facY ↦ ⟨λfacY.e0, []⟩] ⊢ {fun {x} e1} ⇒ ⟨λx.e1, [facY ↦ v0]⟩  [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩] ⊢ {fun {n} e2} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                      n ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 0]                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      n ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1]                                                                                    [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0] ⊢ facY ⇒ ⟨λfacY.e0, []⟩      [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0] ⊢ facY ⇒ ⟨λfacY.e0, []⟩      [facY ↦ ⟨λfacY.e0, []⟩] ⊢ {with {fac e3} e4} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                             x ∈ [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0]            [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 0] ⊢ n ⇒ 0    [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 0] ⊢ 1 ⇒ 1              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                                          ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       fac ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1]                               [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ n ⇒ 1    [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ 1 ⇒ 1        [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0] ⊢ {facY facY} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                                                                                                                                                       [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0] ⊢ x ⇒ 0      [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 0] ⊢ {if0 n 1 e7} ⇒ 1                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             n ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1]            [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ fac ⇒ ⟨λx.e1, [facY ↦ v0]⟩      [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ {- n 1} ⇒ 0                                                                        [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0] ⊢ {e8 x} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――        
                                               facX ∈ [facX ↦ ⟨λfacY.e0, []⟩]                       facX ∈ [facX ↦ ⟨λfacY.e0, []⟩]                       [facY ↦ ⟨λfacY.e0, []⟩] ⊢ {fun {x} e1} ⇒ ⟨λx.e1, [facY ↦ v0]⟩  [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩] ⊢ {fun {n} e2} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                                                                                 n ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1]                   [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ n ⇒ 1      [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ {fac e9} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                             ―――――――――――――――――――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                                                                                                             ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――         ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――      
                                               [facX ↦ ⟨λfacY.e0, []⟩] ⊢ facX ⇒ ⟨λfacY.e0, []⟩      [facX ↦ ⟨λfacY.e0, []⟩] ⊢ facX ⇒ ⟨λfacY.e0, []⟩      [facY ↦ ⟨λfacY.e0, []⟩] ⊢ {with {fac e3} e4} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                                 fac ∈ [fac ↦ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩]                                                                                         [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ n ⇒ 1    1 ≠ 0    [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ {* n e10} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                           ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――      ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――    
    [] ⊢ {fun {facY} e0} ⇒ ⟨λfacY.e0, []⟩    [facX ↦ ⟨λfacY.e0, []⟩] ⊢ {facX facX} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                                                                                                                                                    [fac ↦ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩] ⊢ fac ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩    [fac ↦ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩] ⊢ 1 ⇒ 1    [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ {if0 n 1 e7} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  
    [] ⊢ {with {facX e5} e6} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                                                                                                                                                                                                        [fac ↦ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩] ⊢ {fac 1} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
  [] ⊢ {with {fac e11} e12} ⇒ 1  
* e0 = {with {fac e3} e4}
* e1 = {e8 x}
* e10 = {fac e9}
* e11 = {with {facX e5} e6}
* e12 = {fac 1}
* e2 = {if0 n 1 e7}
* e3 = {fun {x} e1}
* e4 = {fun {n} e2}
* e5 = {fun {facY} e0}
* e6 = {facX facX}
* e7 = {* n e10}
* e8 = {facY facY}
* e9 = {- n 1}
* v0 = ⟨λfacY.e0, []⟩
* v1 = ⟨λx.e1, [facY ↦ v0]⟩

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    facY ∈ [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0]                       facY ∈ [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0]                       [facY ↦ ⟨λfacY.e0, []⟩] ⊢ {fun {x} e1} ⇒ ⟨λx.e1, [facY ↦ v0]⟩  [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩] ⊢ {fun {n} e2} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                      n ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 0]                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  n ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1]                                                                                    [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0] ⊢ facY ⇒ ⟨λfacY.e0, []⟩      [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0] ⊢ facY ⇒ ⟨λfacY.e0, []⟩      [facY ↦ ⟨λfacY.e0, []⟩] ⊢ {with {fac e3} e4} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                             x ∈ [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0]            [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 0] ⊢ n ⇒ 0    [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 0] ⊢ 1 ⇒ 1                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                                          ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   fac ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1]                               [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ n ⇒ 1    [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ 1 ⇒ 1        [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0] ⊢ {facY facY} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                                                                                                                                                       [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0] ⊢ x ⇒ 0      [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 0] ⊢ {if0 n 1 e7} ⇒ 1                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         n ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1]            [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ fac ⇒ ⟨λx.e1, [facY ↦ v0]⟩      [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ {- n 1} ⇒ 0                                                                        [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 0] ⊢ {e8 x} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        facY ∈ [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 1]                       facY ∈ [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 1]                       [facY ↦ ⟨λfacY.e0, []⟩] ⊢ {fun {x} e1} ⇒ ⟨λx.e1, [facY ↦ v0]⟩  [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩] ⊢ {fun {n} e2} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                      n ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1]                   [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ n ⇒ 1      [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ {fac e9} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――         ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      n ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2]                                                                                    [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 1] ⊢ facY ⇒ ⟨λfacY.e0, []⟩      [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 1] ⊢ facY ⇒ ⟨λfacY.e0, []⟩      [facY ↦ ⟨λfacY.e0, []⟩] ⊢ {with {fac e3} e4} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                             x ∈ [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 1]            [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ n ⇒ 1    1 ≠ 0    [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ {* n e10} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                                          ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       fac ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2]                               [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2] ⊢ n ⇒ 2    [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2] ⊢ 1 ⇒ 1        [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 1] ⊢ {facY facY} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                                                                                                                                                       [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 1] ⊢ x ⇒ 1      [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 1] ⊢ {if0 n 1 e7} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             n ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2]            [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2] ⊢ fac ⇒ ⟨λx.e1, [facY ↦ v0]⟩      [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2] ⊢ {- n 1} ⇒ 1                                                                        [facY ↦ ⟨λfacY.e0, []⟩, x ↦ 1] ⊢ {e8 x} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――        
                                               facX ∈ [facX ↦ ⟨λfacY.e0, []⟩]                       facX ∈ [facX ↦ ⟨λfacY.e0, []⟩]                       [facY ↦ ⟨λfacY.e0, []⟩] ⊢ {fun {x} e1} ⇒ ⟨λx.e1, [facY ↦ v0]⟩  [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩] ⊢ {fun {n} e2} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                                                                                 n ∈ [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2]                   [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2] ⊢ n ⇒ 2      [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2] ⊢ {fac e9} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                             ―――――――――――――――――――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                                                                                                             ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――         ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――      
                                               [facX ↦ ⟨λfacY.e0, []⟩] ⊢ facX ⇒ ⟨λfacY.e0, []⟩      [facX ↦ ⟨λfacY.e0, []⟩] ⊢ facX ⇒ ⟨λfacY.e0, []⟩      [facY ↦ ⟨λfacY.e0, []⟩] ⊢ {with {fac e3} e4} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                                 fac ∈ [fac ↦ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩]                                                                                         [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2] ⊢ n ⇒ 2    2 ≠ 0    [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2] ⊢ {* n e10} ⇒ 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                           ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――      ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――    
    [] ⊢ {fun {facY} e0} ⇒ ⟨λfacY.e0, []⟩    [facX ↦ ⟨λfacY.e0, []⟩] ⊢ {facX facX} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                                                                                                                                                    [fac ↦ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩] ⊢ fac ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩    [fac ↦ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩] ⊢ 2 ⇒ 2    [facY ↦ ⟨λfacY.e0, []⟩, fac ↦ ⟨λx.e1, [facY ↦ v0]⟩, n ↦ 2] ⊢ {if0 n 1 e7} ⇒ 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  
    [] ⊢ {with {facX e5} e6} ⇒ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩                                                                                                                                                                                                                                                                        [fac ↦ ⟨λn.e2, [facY ↦ v0, fac ↦ v1]⟩] ⊢ {fac 2} ⇒ 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
  [] ⊢ {with {fac e11} e12} ⇒ 2  
* e0 = {with {fac e3} e4}
* e1 = {e8 x}
* e10 = {fac e9}
* e11 = {with {facX e5} e6}
* e12 = {fac 2}
* e2 = {if0 n 1 e7}
* e3 = {fun {x} e1}
* e4 = {fun {n} e2}
* e5 = {fun {facY} e0}
* e6 = {facX facX}
* e7 = {* n e10}
* e8 = {facY facY}
* e9 = {- n 1}
* v0 = ⟨λfacY.e0, []⟩
* v1 = ⟨λx.e1, [facY ↦ v0]⟩
