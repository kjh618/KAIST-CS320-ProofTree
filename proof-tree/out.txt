                                                                                                                                                                                                                                                                                                                                                                                                                                                              facY ∈ [facY ↦ v0, x ↦ 0]           facY ∈ [facY ↦ v0, x ↦ 0]           [facY ↦ v0] ⊢ {fun {x} {{facY facY} x}} ⇒ v1  [facY ↦ v0, fac ↦ v1] ⊢ e1 ⇒ v2                                          n ∈ [facY ↦ v0, fac ↦ v1, n ↦ 0]                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                            ――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                      ――――――――――――――――――――――――――――――――――――――――                                                    
                                                                                                                                                                                                                                                                                                                                                                        n ∈ [facY ↦ v0, fac ↦ v1, n ↦ 1]                                                      [facY ↦ v0, x ↦ 0] ⊢ facY ⇒ v0      [facY ↦ v0, x ↦ 0] ⊢ facY ⇒ v0      [facY ↦ v0] ⊢ e2 ⇒ v2                                                                x ∈ [facY ↦ v0, x ↦ 0]            [facY ↦ v0, fac ↦ v1, n ↦ 0] ⊢ n ⇒ 0    [facY ↦ v0, fac ↦ v1, n ↦ 0] ⊢ 1 ⇒ 1              
                                                                                                                                                                                                                                                                                                                                                                      ――――――――――――――――――――――――――――――――――――――――                                            ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――            
                                                                                                                                                                                                                                                                                                                         fac ∈ [facY ↦ v0, fac ↦ v1, n ↦ 1]             [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ n ⇒ 1    [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ 1 ⇒ 1        [facY ↦ v0, x ↦ 0] ⊢ {facY facY} ⇒ v2                                                                                                                          [facY ↦ v0, x ↦ 0] ⊢ x ⇒ 0      [facY ↦ v0, fac ↦ v1, n ↦ 0] ⊢ {if0 n 1 {* n {fac {- n 1}}}} ⇒ 1                            
                                                                                                                                                                                                                                                                                                                       ―――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――          
                                                                                                                                                                                                                                                                             n ∈ [facY ↦ v0, fac ↦ v1, n ↦ 1]            [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ fac ⇒ v1      [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ {- n 1} ⇒ 0                                          [facY ↦ v0, x ↦ 0] ⊢ {{facY facY} x} ⇒ 1                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                           ――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――        
                      facX ∈ [facX ↦ v0]           facX ∈ [facX ↦ v0]           [facY ↦ v0] ⊢ {fun {x} {{facY facY} x}} ⇒ v1  [facY ↦ v0, fac ↦ v1] ⊢ e1 ⇒ v2                                                             n ∈ [facY ↦ v0, fac ↦ v1, n ↦ 1]                   [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ n ⇒ 1      [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ {fac {- n 1}} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                
                    ―――――――――――――――――――――――――――  ―――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                         ――――――――――――――――――――――――――――――――――――――――         ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――      
                      [facX ↦ v0] ⊢ facX ⇒ v0      [facX ↦ v0] ⊢ facX ⇒ v0      [facY ↦ v0] ⊢ e2 ⇒ v2                                                                    fac ∈ [fac ↦ v2]                                 [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ n ⇒ 1    1 ≠ 0    [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ {* n {fac {- n 1}}} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                      
                  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――      ―――――――――――――――――――――――――                      ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――    
    [] ⊢ e0 ⇒ v0    [facX ↦ v0] ⊢ {facX facX} ⇒ v2                                                                                                                       [fac ↦ v2] ⊢ fac ⇒ v2    [fac ↦ v2] ⊢ 1 ⇒ 1    [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ {if0 n 1 {* n {fac {- n 1}}}} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                               
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  
    [] ⊢ {with {facX e0} {facX facX}} ⇒ v2                                                                                                                             [fac ↦ v2] ⊢ {fac 1} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
  [] ⊢ e3 ⇒ 1  
* e0 = {fun {facY} {with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}}
* e1 = {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}
* e2 = {with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}
* e3 = {with {fac {with {facX {fun {facY} {with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}}} {facX facX}}} {fac 1}}
* v0 = ⟨λfacY.{with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}, []⟩
* v1 = ⟨λx.{{facY facY} x}, [facY ↦ ⟨λfacY.{with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}, []⟩]⟩
* v2 = ⟨λn.{if0 n 1 {* n {fac {- n 1}}}}, [facY ↦ ⟨λfacY.{with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}, []⟩, fac ↦ ⟨λx.{{facY facY} x}, [facY ↦ ⟨λfacY.{with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}, []⟩]⟩]⟩

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 facY ∈ [facY ↦ v0, x ↦ 0]           facY ∈ [facY ↦ v0, x ↦ 0]           [facY ↦ v0] ⊢ {fun {x} {{facY facY} x}} ⇒ v1  [facY ↦ v0, fac ↦ v1] ⊢ e1 ⇒ v2                                          n ∈ [facY ↦ v0, fac ↦ v1, n ↦ 0]                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                      ――――――――――――――――――――――――――――――――――――――――                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           n ∈ [facY ↦ v0, fac ↦ v1, n ↦ 1]                                                      [facY ↦ v0, x ↦ 0] ⊢ facY ⇒ v0      [facY ↦ v0, x ↦ 0] ⊢ facY ⇒ v0      [facY ↦ v0] ⊢ e2 ⇒ v2                                                                x ∈ [facY ↦ v0, x ↦ 0]            [facY ↦ v0, fac ↦ v1, n ↦ 0] ⊢ n ⇒ 0    [facY ↦ v0, fac ↦ v1, n ↦ 0] ⊢ 1 ⇒ 1                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         ――――――――――――――――――――――――――――――――――――――――                                            ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            fac ∈ [facY ↦ v0, fac ↦ v1, n ↦ 1]             [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ n ⇒ 1    [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ 1 ⇒ 1        [facY ↦ v0, x ↦ 0] ⊢ {facY facY} ⇒ v2                                                                                                                          [facY ↦ v0, x ↦ 0] ⊢ x ⇒ 0      [facY ↦ v0, fac ↦ v1, n ↦ 0] ⊢ {if0 n 1 {* n {fac {- n 1}}}} ⇒ 1                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ―――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                n ∈ [facY ↦ v0, fac ↦ v1, n ↦ 1]            [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ fac ⇒ v1      [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ {- n 1} ⇒ 0                                          [facY ↦ v0, x ↦ 0] ⊢ {{facY facY} x} ⇒ 1                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                
                                                                                                                                                                                                                                                                                                                                                                                                                                                              facY ∈ [facY ↦ v0, x ↦ 1]           facY ∈ [facY ↦ v0, x ↦ 1]           [facY ↦ v0] ⊢ {fun {x} {{facY facY} x}} ⇒ v1  [facY ↦ v0, fac ↦ v1] ⊢ e1 ⇒ v2                                          n ∈ [facY ↦ v0, fac ↦ v1, n ↦ 1]                   [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ n ⇒ 1      [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ {fac {- n 1}} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                            ――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                      ――――――――――――――――――――――――――――――――――――――――         ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――              
                                                                                                                                                                                                                                                                                                                                                                        n ∈ [facY ↦ v0, fac ↦ v1, n ↦ 2]                                                      [facY ↦ v0, x ↦ 1] ⊢ facY ⇒ v0      [facY ↦ v0, x ↦ 1] ⊢ facY ⇒ v0      [facY ↦ v0] ⊢ e2 ⇒ v2                                                                x ∈ [facY ↦ v0, x ↦ 1]            [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ n ⇒ 1    1 ≠ 0    [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ {* n {fac {- n 1}}} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                      ――――――――――――――――――――――――――――――――――――――――                                            ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――            
                                                                                                                                                                                                                                                                                                                         fac ∈ [facY ↦ v0, fac ↦ v1, n ↦ 2]             [facY ↦ v0, fac ↦ v1, n ↦ 2] ⊢ n ⇒ 2    [facY ↦ v0, fac ↦ v1, n ↦ 2] ⊢ 1 ⇒ 1        [facY ↦ v0, x ↦ 1] ⊢ {facY facY} ⇒ v2                                                                                                                          [facY ↦ v0, x ↦ 1] ⊢ x ⇒ 1      [facY ↦ v0, fac ↦ v1, n ↦ 1] ⊢ {if0 n 1 {* n {fac {- n 1}}}} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                       ―――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――          
                                                                                                                                                                                                                                                                             n ∈ [facY ↦ v0, fac ↦ v1, n ↦ 2]            [facY ↦ v0, fac ↦ v1, n ↦ 2] ⊢ fac ⇒ v1      [facY ↦ v0, fac ↦ v1, n ↦ 2] ⊢ {- n 1} ⇒ 1                                          [facY ↦ v0, x ↦ 1] ⊢ {{facY facY} x} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                           ――――――――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――        
                      facX ∈ [facX ↦ v0]           facX ∈ [facX ↦ v0]           [facY ↦ v0] ⊢ {fun {x} {{facY facY} x}} ⇒ v1  [facY ↦ v0, fac ↦ v1] ⊢ e1 ⇒ v2                                                             n ∈ [facY ↦ v0, fac ↦ v1, n ↦ 2]                   [facY ↦ v0, fac ↦ v1, n ↦ 2] ⊢ n ⇒ 2      [facY ↦ v0, fac ↦ v1, n ↦ 2] ⊢ {fac {- n 1}} ⇒ 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                    ―――――――――――――――――――――――――――  ―――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――                                                         ――――――――――――――――――――――――――――――――――――――――         ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――      
                      [facX ↦ v0] ⊢ facX ⇒ v0      [facX ↦ v0] ⊢ facX ⇒ v0      [facY ↦ v0] ⊢ e2 ⇒ v2                                                                    fac ∈ [fac ↦ v2]                                 [facY ↦ v0, fac ↦ v1, n ↦ 2] ⊢ n ⇒ 2    2 ≠ 0    [facY ↦ v0, fac ↦ v1, n ↦ 2] ⊢ {* n {fac {- n 1}}} ⇒ 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――      ―――――――――――――――――――――――――                      ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――    
    [] ⊢ e0 ⇒ v0    [facX ↦ v0] ⊢ {facX facX} ⇒ v2                                                                                                                       [fac ↦ v2] ⊢ fac ⇒ v2    [fac ↦ v2] ⊢ 2 ⇒ 2    [facY ↦ v0, fac ↦ v1, n ↦ 2] ⊢ {if0 n 1 {* n {fac {- n 1}}}} ⇒ 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――  
    [] ⊢ {with {facX e0} {facX facX}} ⇒ v2                                                                                                                             [fac ↦ v2] ⊢ {fac 2} ⇒ 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
  [] ⊢ e3 ⇒ 2  
* e0 = {fun {facY} {with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}}
* e1 = {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}
* e2 = {with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}
* e3 = {with {fac {with {facX {fun {facY} {with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}}} {facX facX}}} {fac 2}}
* v0 = ⟨λfacY.{with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}, []⟩
* v1 = ⟨λx.{{facY facY} x}, [facY ↦ ⟨λfacY.{with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}, []⟩]⟩
* v2 = ⟨λn.{if0 n 1 {* n {fac {- n 1}}}}, [facY ↦ ⟨λfacY.{with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}, []⟩, fac ↦ ⟨λx.{{facY facY} x}, [facY ↦ ⟨λfacY.{with {fac {fun {x} {{facY facY} x}}} {fun {n} {if0 n 1 {* n {fac {- n 1}}}}}}, []⟩]⟩]⟩
